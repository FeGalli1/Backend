<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario para agregar productos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.3/socket.io.js"></script>
    <script>
        const socket = io();  // Establecer conexión con el servidor Socket.io

        // Escuchar eventos de actualización de productos
        socket.on('products', (products) => {
            // Actualizar la lista de productos (por ejemplo, mostrar en consola)
            console.log('Productos actualizados:', products);
        });
    </script>
</head>
<body>
    <h3>Agregar Producto</h3>
    <form action="/api/productos" method="POST" onsubmit="enviarProducto(event)">
        <label for="title">Título:</label>
        <input type="text" name="title" required>

        <label for="price">Precio:</label>
        <input type="text" name="price" required>

        <label for="thumbnail">Thumbnail:</label>
        <input type="text" name="thumbnail" required>
        
        <button type="submit">Agregar producto a la lista</button>
    </form>

    <script>
        // Función para enviar datos del producto al servidor
        function enviarProducto(event) {
            event.preventDefault();  // Evitar que se envíe el formulario de manera convencional
            
            const formData = new FormData(event.target);
            const productData = {};
            formData.forEach((value, key) => {
                productData[key] = value;
            });

            // Enviar los datos del producto al servidor a través de WebSocket
            socket.emit('nuevoProducto', productData);
        }
    </script>
</body>
</html>
